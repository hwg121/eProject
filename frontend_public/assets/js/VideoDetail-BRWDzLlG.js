import{j as e,m as t,C as s,U as i,a4 as n}from"./ui-CSNrQhPN.js";import{r as l}from"./react-vendor-Dr4n66tC.js";import{D as a}from"./DetailPage-CRrYFooM.js";import{L as r}from"./index-BW9itGGG.js";import{f as o}from"./slug-BijzlL0q.js";import{p as d}from"./api-CwrNSExO.js";import{c,a as m}from"./router-bS1xvxPY.js";const u=()=>{const{slug:u}=c(),x=m(),[p,g]=l.useState(null),[h,v]=l.useState(!0),[b,f]=l.useState(null);return l.useEffect(()=>{var e;u&&(e=function*(){var e;try{v(!0);try{const t=yield d.getVideos(),s=o(t,u,"slug","title");if(s){const t={id:(null==(e=s.id)?void 0:e.toString())||u,title:s.title||"Untitled Video",description:s.description||"No description available.",content:s.content||s.transcript||"\n                <h2>Video Content</h2>\n                <p>This video covers important gardening techniques and tips.</p>\n              ",author:s.author||s.instructor||"Unknown Author",publishedAt:s.published_at||s.created_at||(new Date).toISOString(),tags:s.tags||s.categories||["General"],imageUrl:s.thumbnail||s.imageUrl||"https://images.pexels.com/photos/416978/pexels-photo-416978.jpeg",views:s.views||0,likes:s.likes||0,duration:s.duration||"12:30",videoUrl:s.embed_url||s.video_url||"https://example.com/video.mp4"};return void g(t)}}catch(t){return void f("Failed to load video from server")}f("Video not found")}catch(s){f("Failed to load video")}finally{v(!1)}},new Promise((t,s)=>{var i=t=>{try{l(e.next(t))}catch(i){s(i)}},n=t=>{try{l(e.throw(t))}catch(i){s(i)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,n);l((e=e.apply(void 0,null)).next())}))},[u]),h?e.jsx(r,{}):b||!p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-4",children:"Video not found"}),e.jsx("button",{onClick:()=>x("/videos"),className:"px-6 py-3 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Back to Videos"})]})}):e.jsx(a,{type:"video",title:p.title,description:p.description,content:`\n        <h2>Video Information</h2>\n        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">\n          <div>\n            <h3 class="text-xl font-semibold mb-4">Basic Details</h3>\n            <ul class="space-y-2">\n              <li><strong>Instructor:</strong> ${p.author}</li>\n              <li><strong>Duration:</strong> ${p.duration}</li>\n              <li><strong>Views:</strong> ${p.views.toLocaleString()}</li>\n              <li><strong>Likes:</strong> ${p.likes.toLocaleString()}</li>\n            </ul>\n          </div>\n          <div>\n            <h3 class="text-xl font-semibold mb-4">Video Stats</h3>\n            <ul class="space-y-2">\n              <li><strong>Published:</strong> ${new Date(p.publishedAt).toLocaleDateString()}</li>\n              <li><strong>Category:</strong> Gardening Tutorial</li>\n              <li><strong>Difficulty:</strong> All Levels</li>\n              <li><strong>Language:</strong> English</li>\n            </ul>\n          </div>\n        </div>\n        \n        <h3 class="text-xl font-semibold mb-4">Video Description</h3>\n        <p class="mb-6">${p.description}</p>\n        \n        <h3 class="text-xl font-semibold mb-4">What You'll Learn</h3>\n        <ul class="space-y-2 mb-6">\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Step-by-step gardening techniques</li>\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Visual demonstrations and examples</li>\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Professional tips and tricks</li>\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Common mistakes to avoid</li>\n        </ul>\n      `,author:p.author,publishedAt:p.publishedAt,tags:p.tags,imageUrl:p.imageUrl,views:p.views||0,likes:p.likes||0,backUrl:"/videos",rating:0,contentId:parseInt(p.id),duration:p.duration,relatedContent:[{id:"2",title:"Organic Soil Preparation",type:"video",slug:"organic-soil-preparation"},{id:"3",title:"Pruning Techniques",type:"video",slug:"pruning-techniques"},{id:"4",title:"Watering Systems",type:"video",slug:"watering-systems"}],children:e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl",children:[e.jsx(s,{className:"h-6 w-6 text-emerald-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-800",children:p.duration}),e.jsx("div",{className:"text-sm text-emerald-600",children:"Duration"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx(i,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:p.views.toLocaleString()}),e.jsx("div",{className:"text-sm text-blue-600",children:"Views"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsx(n,{className:"h-6 w-6 text-red-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-red-800",children:p.likes.toLocaleString()}),e.jsx("div",{className:"text-sm text-red-600",children:"Likes"})]})]})})};export{u as default};
