import{j as e,m as s,O as t,q as a,a8 as l,r as i,a9 as r}from"./ui-CMevdwv8.js";import{r as n}from"./react-vendor-BhZTnVUQ.js";import{D as o}from"./DetailPage-CkA3VJvY.js";import{L as d}from"./index-BpxLFczy.js";import{p as c}from"./api-BXW0tsBT.js";import{f as m}from"./slug-BijzlL0q.js";import{c as x,a as u}from"./router-DDTfc0mm.js";const h=()=>{const{slug:h}=x(),p=u(),[b,g]=n.useState(null),[f,j]=n.useState(!0),[y,N]=n.useState(null);return n.useEffect(()=>{var e;h&&(e=function*(){var e;try{j(!0);try{const s=yield c.getBooks(),t=m(s,h,"slug","title");if(t){const s={id:(null==(e=t.id)?void 0:e.toString())||h,title:t.title||"Untitled Book",description:t.description||"No description available.",content:t.content||t.summary||"\n                <h2>Book Summary</h2>\n                <p>This book provides comprehensive information about gardening techniques and practices.</p>\n              ",author:t.author||"Unknown Author",publishedAt:t.published_year?t.published_year+"-01-01":t.created_at||(new Date).toISOString(),tags:t.tags||t.categories||["General"],imageUrl:t.image||t.imageUrl||"https://images.pexels.com/photos/415071/pexels-photo-415071.jpeg",views:t.views||0,likes:t.likes||0,price:t.price||0,rating:t.rating||4,pages:t.pages||0,publishedYear:t.published_year||(new Date).getFullYear(),isbn:t.isbn||"N/A",publisher:t.publisher||"Unknown Publisher",language:t.language||"English"};return void g(s)}}catch(s){return void N("Failed to load data from server")}N("Data not found")}catch(t){N("Failed to load book")}finally{j(!1)}},new Promise((s,t)=>{var a=s=>{try{i(e.next(s))}catch(a){t(a)}},l=s=>{try{i(e.throw(s))}catch(a){t(a)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,l);i((e=e.apply(void 0,null)).next())}))},[h]),f?e.jsx(d,{}):y||!b?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-4",children:"Book not found"}),e.jsx("button",{onClick:()=>p("/books"),className:"px-6 py-3 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Back to Books"})]})}):e.jsxs(o,{type:"book",title:b.title,description:b.description,content:b.content,author:b.author,publishedAt:b.publishedAt,tags:b.tags,imageUrl:b.imageUrl,views:b.views,likes:b.likes,backUrl:"/books",rating:b.rating,price:b.price,category:"Gardening",relatedContent:[{id:"2",title:"The Vegetable Gardener's Bible",type:"book",slug:"vegetable-gardeners-bible"},{id:"3",title:"Indoor Plant Care Guide",type:"book",slug:"indoor-plant-care-guide"},{id:"4",title:"Seasonal Gardening Calendar",type:"book",slug:"seasonal-gardening-calendar"}],children:[e.jsxs(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center",children:[e.jsx(t,{className:"h-5 w-5 mr-2"}),"Book Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Pages:"}),e.jsx("span",{className:"text-blue-600",children:b.pages})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Published:"}),e.jsx("span",{className:"text-blue-600",children:b.publishedYear})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Publisher:"}),e.jsx("span",{className:"text-blue-600",children:b.publisher})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Language:"}),e.jsx("span",{className:"text-blue-600",children:b.language})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"ISBN:"}),e.jsx("span",{className:"text-blue-600 text-sm",children:b.isbn})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-800 mb-4",children:"Pricing & Rating"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-3xl font-bold text-emerald-800",children:["$",b.price]}),e.jsxs("div",{className:"flex items-center",children:[[...[,,,,,]].map((s,t)=>e.jsx(a,{className:"h-5 w-5 "+(t<Math.floor(b.rating)?"text-yellow-400 fill-current":"text-gray-300")},t)),e.jsxs("span",{className:"ml-2 text-emerald-700 font-medium",children:[b.rating,"/5"]})]})]}),e.jsxs("div",{className:"text-sm text-emerald-600",children:["Author: ",e.jsx("span",{className:"font-semibold",children:b.author})]})]})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{className:"flex-1 flex items-center justify-center px-6 py-4 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition-colors font-semibold",children:[e.jsx(l,{className:"h-5 w-5 mr-2"}),"Add to Cart - $",b.price]}),e.jsxs("button",{className:"flex-1 flex items-center justify-center px-6 py-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors font-semibold",children:[e.jsx(t,{className:"h-5 w-5 mr-2"}),"Read Sample"]}),e.jsxs("button",{className:"flex-1 flex items-center justify-center px-6 py-4 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors font-semibold",children:[e.jsx(i,{className:"h-5 w-5 mr-2"}),"Add to Wishlist"]}),e.jsxs("button",{className:"flex-1 flex items-center justify-center px-6 py-4 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors font-semibold",children:[e.jsx(r,{className:"h-5 w-5 mr-2"}),"Share"]})]})]})};export{h as default};
