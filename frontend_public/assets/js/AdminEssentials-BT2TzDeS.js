var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,n=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(s)for(var t of s(a))r.call(a,t)&&i(e,t,a[t]);return e},c=(e,s)=>a(e,t(s)),d=(e,a,t)=>new Promise((s,l)=>{var r=e=>{try{n(t.next(e))}catch(a){l(a)}},i=e=>{try{n(t.throw(e))}catch(a){l(a)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,i);n((t=t.apply(e,a)).next())});import{j as o,m as x,ai as m,aj as g,B as h,ak as p,al as u,e as y,a1 as j,X as b,an as v}from"./ui-BeigVymU.js";import{r as N}from"./react-vendor-Dr4n66tC.js";import{u as f,C as w}from"./index-BqpLz_LI.js";import{I as C}from"./ImageUpload-D32iZQte.js";import{p as S}from"./api-CqxBAxC4.js";import"./router-bS1xvxPY.js";const z=()=>{const{isDarkMode:e}=f(),[a,t]=N.useState([]),[s,l]=N.useState(""),[r,i]=N.useState("all"),[b,v]=N.useState("all"),[C,z]=N.useState(!1),[I,P]=N.useState(null),[E,M]=N.useState(1),[L,O]=N.useState(null),T=["Soil Amendment","Growing Medium","Fertilizer","Seeds","Plant Food"],$=a.filter(e=>{const a=e.name.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())||e.material.toLowerCase().includes(s.toLowerCase()),t="all"===r||e.type===r,l="all"===b||e.status===b;return a&&t&&l}),A=Math.ceil($.length/20),D=$.slice(20*(E-1),20*E);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-800"),children:"Essentials Management"}),o.jsx("p",{className:"mt-2 "+(e?"text-gray-300":"text-gray-600"),children:"Manage gardening essentials, soil, fertilizers, and growing mediums"})]}),o.jsxs(x.button,{onClick:()=>{P(null),z(!0)},className:"flex items-center space-x-2 bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:[o.jsx(m,{className:"h-5 w-5"}),o.jsx("span",{children:"Add Essential"})]})]}),o.jsx(w,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 "+(e?"text-gray-400":"text-gray-500")}),o.jsx("input",{type:"text",placeholder:"Search essentials...",value:s,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),o.jsxs("select",{value:r,onChange:e=>i(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[o.jsx("option",{value:"all",children:"All Types"}),T.map(e=>o.jsx("option",{value:e,children:e},e))]}),o.jsxs("select",{value:b,onChange:e=>v(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]}),o.jsxs("div",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} flex items-center`,children:["Total: ",$.length," items"]})]})}),o.jsxs(w,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b "+(e?"border-gray-700":"border-gray-200"),children:[o.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Essential"}),o.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Type"}),o.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Size/Material"}),o.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"pH Level"}),o.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Status"}),o.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Actions"})]})}),o.jsx("tbody",{children:D.map(a=>o.jsxs(x.tr,{className:"border-b hover:bg-opacity-50 transition-colors "+(e?"border-gray-700 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[o.jsx("td",{className:"py-4 px-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-12 h-12 object-cover rounded-lg"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold "+(e?"text-white":"text-gray-800"),children:a.name}),o.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-500"),children:[a.description.substring(0,50),"..."]})]})]})}),o.jsx("td",{className:"py-4 px-4 "+(e?"text-gray-300":"text-gray-600"),children:a.type}),o.jsx("td",{className:"py-4 px-4 "+(e?"text-gray-300":"text-gray-600"),children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:a.size}),o.jsx("p",{className:"text-sm",children:a.material})]})}),o.jsx("td",{className:"py-4 px-4 "+(e?"text-gray-300":"text-gray-600"),children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(h,{className:"h-4 w-4"}),o.jsx("span",{children:a.phLevel})]})}),o.jsx("td",{className:"py-4 px-4",children:o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+("active"===a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a.status})}),o.jsx("td",{className:"py-4 px-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(x.button,{onClick:()=>(e=>{P(e),z(!0)})(a),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(p,{className:"h-4 w-4"})}),o.jsx(x.button,{onClick:()=>O(a.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:o.jsx(u,{className:"h-4 w-4"})})]})})]},a.id))})]})}),A>1&&o.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[o.jsx("button",{onClick:()=>M(Math.max(1,E-1)),disabled:1===E,className:"px-3 py-2 rounded-lg "+(1===E?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Previous"}),o.jsxs("span",{className:"px-4 py-2 "+(e?"text-gray-300":"text-gray-600"),children:["Page ",E," of ",A]}),o.jsx("button",{onClick:()=>M(Math.min(A,E+1)),disabled:E===A,className:"px-3 py-2 rounded-lg "+(E===A?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Next"})]})]}),o.jsx(y,{children:C&&o.jsx(k,{essential:I,types:T,onSave:e=>d(void 0,null,function*(){try{if(I)yield S.updateItem(I.id,e,"essentials"),t(a.map(a=>a.id===I.id?c(n(n({},a),e),{updatedAt:(new Date).toISOString().split("T")[0]}):a));else{const s=yield S.createItem(e,"essentials");t([s,...a])}z(!1),P(null)}catch(s){alert("Failed to save essential. Please try again.")}}),onCancel:()=>z(!1),isDarkMode:e})}),o.jsx(y,{children:L&&o.jsx(x.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(x.div,{className:"max-w-md w-full rounded-xl p-6 "+(e?"bg-gray-800":"bg-white"),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(j,{className:"h-6 w-6 text-red-500"}),o.jsx("h3",{className:"text-lg font-semibold "+(e?"text-white":"text-gray-800"),children:"Confirm Delete"})]}),o.jsx("p",{className:"mb-6 "+(e?"text-gray-300":"text-gray-600"),children:"Are you sure you want to delete this essential? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 rounded-lg font-medium "+(e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Cancel"}),o.jsx("button",{onClick:()=>{return e=L,d(void 0,null,function*(){try{yield S.deleteItem(e,"essentials"),t(a.filter(a=>a.id!==e)),O(null)}catch(s){alert("Failed to delete essential. Please try again.")}});var e},className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600",children:"Delete"})]})]})})})]})},k=({essential:e,types:a,onSave:t,onCancel:s,isDarkMode:l})=>{const[r,i]=N.useState(e||{name:"",description:"",type:a[0]||"",size:"",material:"",careInstructions:"",imageUrl:"",status:"active",phLevel:"",nutrients:"",usage:""}),[d,m]=N.useState({}),g="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(l?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),h="block font-semibold mb-2 "+(l?"text-gray-300":"text-gray-700");return o.jsx(x.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(x.div,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-xl p-6 "+(l?"bg-gray-800":"bg-white"),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold "+(l?"text-white":"text-gray-800"),children:e?"Edit Essential":"Add New Essential"}),o.jsx("button",{onClick:s,className:"p-2 rounded-lg "+(l?"hover:bg-gray-700":"hover:bg-gray-100"),children:o.jsx(b,{className:"h-6 w-6"})})]}),o.jsxs("form",{onSubmit:e=>{e.preventDefault(),(()=>{var e,a,t,s;const l={};return(null==(e=r.name)?void 0:e.trim())||(l.name="Name is required"),(null==(a=r.description)?void 0:a.trim())||(l.description="Description is required"),r.type||(l.type="Type is required"),(null==(t=r.size)?void 0:t.trim())||(l.size="Size is required"),(null==(s=r.material)?void 0:s.trim())||(l.material="Material is required"),m(l),0===Object.keys(l).length})()&&t(r)},className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Name *"}),o.jsx("input",{type:"text",value:r.name||"",onChange:e=>i(c(n({},r),{name:e.target.value})),className:`${g} ${d.name?"border-red-500":""}`,placeholder:"Enter essential name"}),d.name&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Type *"}),o.jsx("select",{value:r.type||"",onChange:e=>i(c(n({},r),{type:e.target.value})),className:`${g} ${d.type?"border-red-500":""}`,children:a.map(e=>o.jsx("option",{value:e,children:e},e))}),d.type&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.type})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Size *"}),o.jsx("input",{type:"text",value:r.size||"",onChange:e=>i(c(n({},r),{size:e.target.value})),className:`${g} ${d.size?"border-red-500":""}`,placeholder:"e.g., 40lb bag, 1 gallon"}),d.size&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.size})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Material *"}),o.jsx("input",{type:"text",value:r.material||"",onChange:e=>i(c(n({},r),{material:e.target.value})),className:`${g} ${d.material?"border-red-500":""}`,placeholder:"e.g., Organic matter, Peat moss"}),d.material&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.material})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"pH Level"}),o.jsx("input",{type:"text",value:r.phLevel||"",onChange:e=>i(c(n({},r),{phLevel:e.target.value})),className:g,placeholder:"e.g., 6.0-7.0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Status"}),o.jsxs("select",{value:r.status||"active",onChange:e=>i(c(n({},r),{status:e.target.value})),className:g,children:[o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Description *"}),o.jsx("textarea",{value:r.description||"",onChange:e=>i(c(n({},r),{description:e.target.value})),className:`${g} h-32 resize-none ${d.description?"border-red-500":""}`,placeholder:"Enter detailed description"}),d.description&&o.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.description})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Care Instructions"}),o.jsx("textarea",{value:r.careInstructions||"",onChange:e=>i(c(n({},r),{careInstructions:e.target.value})),className:g+" h-24 resize-none",placeholder:"Enter care and usage instructions"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Nutrients"}),o.jsx("input",{type:"text",value:r.nutrients||"",onChange:e=>i(c(n({},r),{nutrients:e.target.value})),className:g,placeholder:"e.g., High in NPK, Balanced"})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Usage Instructions"}),o.jsx("input",{type:"text",value:r.usage||"",onChange:e=>i(c(n({},r),{usage:e.target.value})),className:g,placeholder:"e.g., Mix 1:3 ratio with soil"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:h,children:"Featured Image"}),o.jsx(C,{value:r.imageUrl||"",onChange:e=>i(c(n({},r),{imageUrl:e})),onError:e=>alert(e),className:"mt-1",placeholder:"Upload featured image"})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 rounded-lg font-semibold transition-colors "+(l?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Cancel"}),o.jsxs(x.button,{type:"submit",className:"flex items-center space-x-2 px-6 py-3 bg-emerald-500 text-white rounded-lg font-semibold hover:bg-emerald-600 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[o.jsx(v,{className:"h-5 w-5"}),o.jsx("span",{children:e?"Update Essential":"Create Essential"})]})]})]})]})})};export{z as default};
