import{j as e,m as s,J as t,o as a}from"./ui-BR02Q1T1.js";import{r as l}from"./react-vendor-Dr4n66tC.js";import{D as n}from"./DetailPage-CFgWMv8n.js";import{L as i}from"./index-DCYFHHtV.js";import{p as r}from"./api-DKEoxTuU.js";import{f as o}from"./slug-BijzlL0q.js";import{c,a as d}from"./router-bS1xvxPY.js";const m=()=>{const{slug:m}=c(),g=d(),[u,x]=l.useState(null),[h,p]=l.useState(!0),[b,f]=l.useState(null);return l.useEffect(()=>{var e;m&&(e=function*(){var e;try{p(!0);try{const s=yield r.getBooks(),t=o(s,m,"slug","title");if(t){const s={id:(null==(e=t.id)?void 0:e.toString())||m,title:t.title||"Untitled Book",description:t.description||"No description available.",content:t.content||t.summary||"\n                <h2>Book Summary</h2>\n                <p>This book provides comprehensive information about gardening techniques and practices.</p>\n              ",author:t.author||"Unknown Author",publishedAt:t.published_year?t.published_year+"-01-01":t.created_at||(new Date).toISOString(),tags:t.tags||t.categories||["General"],imageUrl:t.image||t.imageUrl||"https://images.pexels.com/photos/415071/pexels-photo-415071.jpeg",views:t.views||0,likes:t.likes||0,price:t.price||0,rating:t.rating||0,pages:t.pages||0,publishedYear:t.published_year||(new Date).getFullYear(),isbn:t.isbn||"N/A",publisher:t.publisher||"Unknown Publisher",language:t.language||"English"};return void x(s)}}catch(s){return void f("Failed to load data from server")}f("Data not found")}catch(t){f("Failed to load book")}finally{p(!1)}},new Promise((s,t)=>{var a=s=>{try{n(e.next(s))}catch(a){t(a)}},l=s=>{try{n(e.throw(s))}catch(a){t(a)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,l);n((e=e.apply(void 0,null)).next())}))},[m]),h?e.jsx(i,{}):b||!u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-4",children:"Book not found"}),e.jsx("button",{onClick:()=>g("/books"),className:"px-6 py-3 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Back to Books"})]})}):e.jsx(n,{type:"book",title:u.title,description:u.description,content:`\n        <h2>Book Information</h2>\n        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">\n          <div>\n            <h3 class="text-xl font-semibold mb-4">Basic Details</h3>\n            <ul class="space-y-2">\n              <li><strong>Author:</strong> ${u.author}</li>\n              <li><strong>Publisher:</strong> ${u.publisher}</li>\n              <li><strong>Language:</strong> ${u.language}</li>\n              <li><strong>Pages:</strong> ${u.pages}</li>\n              <li><strong>Published Year:</strong> ${u.publishedYear}</li>\n              <li><strong>ISBN:</strong> ${u.isbn}</li>\n            </ul>\n          </div>\n          <div>\n            <h3 class="text-xl font-semibold mb-4">Pricing & Rating</h3>\n            <ul class="space-y-2">\n              <li><strong>Price:</strong> $${u.price}</li>\n              <li><strong>Rating:</strong> ${u.rating}/5 ⭐</li>\n              <li><strong>Views:</strong> ${u.views.toLocaleString()}</li>\n              <li><strong>Likes:</strong> ${u.likes.toLocaleString()}</li>\n            </ul>\n          </div>\n        </div>\n        \n        <h3 class="text-xl font-semibold mb-4">Book Summary</h3>\n        <p class="mb-6">${u.description}</p>\n        \n        <h3 class="text-xl font-semibold mb-4">What You'll Learn</h3>\n        <ul class="space-y-2 mb-6">\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Comprehensive gardening techniques</li>\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Plant care and maintenance</li>\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Seasonal gardening tips</li>\n          <li class="flex items-center"><span class="text-emerald-600 mr-2">✓</span>Problem-solving strategies</li>\n        </ul>\n      `,author:u.author,publishedAt:u.publishedAt,tags:u.tags,imageUrl:u.imageUrl,views:u.views||0,likes:u.likes||0,backUrl:"/books",rating:u.rating||0,contentId:parseInt(u.id),price:u.price,category:"Gardening",relatedContent:[{id:"2",title:"The Vegetable Gardener's Bible",type:"book",slug:"vegetable-gardeners-bible"},{id:"3",title:"Indoor Plant Care Guide",type:"book",slug:"indoor-plant-care-guide"},{id:"4",title:"Seasonal Gardening Calendar",type:"book",slug:"seasonal-gardening-calendar"}],children:e.jsxs(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center",children:[e.jsx(t,{className:"h-5 w-5 mr-2"}),"Book Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Pages:"}),e.jsx("span",{className:"text-blue-600",children:u.pages})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Published:"}),e.jsx("span",{className:"text-blue-600",children:u.publishedYear})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Publisher:"}),e.jsx("span",{className:"text-blue-600",children:u.publisher})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Language:"}),e.jsx("span",{className:"text-blue-600",children:u.language})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"ISBN:"}),e.jsx("span",{className:"text-blue-600 text-sm",children:u.isbn})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-800 mb-4",children:"Pricing & Rating"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-3xl font-bold text-emerald-800",children:["$",u.price]}),e.jsxs("div",{className:"flex items-center",children:[[...[,,,,,]].map((s,t)=>e.jsx(a,{className:"h-5 w-5 "+(t<Math.floor(u.rating)?"text-yellow-400 fill-current":"text-gray-300")},t)),e.jsxs("span",{className:"ml-2 text-emerald-700 font-medium",children:[u.rating,"/5"]})]})]}),e.jsxs("div",{className:"text-sm text-emerald-600",children:["Author: ",e.jsx("span",{className:"font-semibold",children:u.author})]})]})]})]})})};export{m as default};
