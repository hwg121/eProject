var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&i(e,a,t[a]);if(s)for(var a of s(t))l.call(t,a)&&i(e,a,t[a]);return e},o=(e,s)=>t(e,a(s)),c=(e,t,a)=>new Promise((s,r)=>{var l=e=>{try{n(a.next(e))}catch(t){r(t)}},i=e=>{try{n(a.throw(e))}catch(t){r(t)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,i);n((a=a.apply(e,t)).next())});import{j as d,m as x,aj as m,ak as g,D as h,al as p,am as u,g as y,a3 as b,X as j,an as v}from"./ui-rChtIiB6.js";import{r as f}from"./react-vendor-Dr4n66tC.js";import{u as N,C as w}from"./index-Bjlkjo5_.js";import{I as C}from"./ImageUpload-B57SuavX.js";import{p as S}from"./api-ClnZCBU8.js";import"./router-bS1xvxPY.js";const k=()=>{const{isDarkMode:e}=N(),[t,a]=f.useState([]),[s,r]=f.useState(!0),[l,i]=f.useState(null),[j,v]=f.useState(""),[C,k]=f.useState("all"),[P,O]=f.useState("all"),[$,D]=f.useState(!1),[I,A]=f.useState(null),[M,E]=f.useState(1),[F,L]=f.useState(null);f.useEffect(()=>{c(void 0,null,function*(){try{r(!0),i(null);const e=(yield S.getTools()).map(e=>{var t,a;return{id:e.id.toString(),name:e.name,description:e.description,brand:"Green Groves",model:e.slug||"GG-001",price:0,category:"Tools",specifications:e.description,imageUrl:e.images_json?JSON.parse(e.images_json)[0]:"/image.png",status:"active",rating:4.5,inStock:!0,createdAt:(null==(t=e.created_at)?void 0:t.split("T")[0])||(new Date).toISOString().split("T")[0],updatedAt:(null==(a=e.updated_at)?void 0:a.split("T")[0])||(new Date).toISOString().split("T")[0]}});a(e)}catch(e){i("Failed to load tools")}finally{r(!1)}})},[]);const U=["Cutting Tools","Hand Tools","Power Tools","Watering","Soil Tools"],q=t.filter(e=>{const t=e.name.toLowerCase().includes(j.toLowerCase())||e.brand.toLowerCase().includes(j.toLowerCase())||e.description.toLowerCase().includes(j.toLowerCase()),a="all"===C||e.category===C,s="all"===P||e.status===P;return t&&a&&s}),H=Math.ceil(q.length/20),z=q.slice(20*(M-1),20*M);return s?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs(w,{className:"text-center p-8",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),d.jsx("h2",{className:"text-2xl font-bold text-emerald-600 mb-4",children:"Loading Tools"}),d.jsx("p",{className:"text-gray-600",children:"Please wait while we load your tools..."})]})}):l?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs(w,{className:"text-center p-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Tools"}),d.jsx("p",{className:"text-gray-600 mb-4",children:l}),d.jsx("button",{onClick:()=>window.location.reload(),className:"bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition-colors",children:"Try Again"})]})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-800"),children:"Tools Management"}),d.jsx("p",{className:"mt-2 "+(e?"text-gray-300":"text-gray-600"),children:"Manage gardening tools inventory and information"})]}),d.jsxs(x.button,{onClick:()=>{A(null),D(!0)},className:"flex items-center space-x-2 bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(m,{className:"h-5 w-5"}),d.jsx("span",{children:"Add Tool"})]})]}),d.jsx(w,{children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 "+(e?"text-gray-400":"text-gray-500")}),d.jsx("input",{type:"text",placeholder:"Search tools...",value:j,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),d.jsxs("select",{value:C,onChange:e=>k(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[d.jsx("option",{value:"all",children:"All Categories"}),U.map(e=>d.jsx("option",{value:e,children:e},e))]}),d.jsxs("select",{value:P,onChange:e=>O(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]}),d.jsxs("div",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} flex items-center`,children:["Total: ",q.length," tools"]})]})}),d.jsxs(w,{children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b "+(e?"border-gray-700":"border-gray-200"),children:[d.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Tool"}),d.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Brand/Model"}),d.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Category"}),d.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Price"}),d.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Status"}),d.jsx("th",{className:"text-left py-4 px-4 font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Actions"})]})}),d.jsx("tbody",{children:z.map(t=>d.jsxs(x.tr,{className:"border-b hover:bg-opacity-50 transition-colors "+(e?"border-gray-700 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[d.jsx("td",{className:"py-4 px-4",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-12 h-12 object-cover rounded-lg"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold "+(e?"text-white":"text-gray-800"),children:t.name}),d.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-500"),children:[t.description.substring(0,50),"..."]})]})]})}),d.jsx("td",{className:"py-4 px-4 "+(e?"text-gray-300":"text-gray-600"),children:d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:t.brand}),d.jsx("p",{className:"text-sm",children:t.model})]})}),d.jsx("td",{className:"py-4 px-4 "+(e?"text-gray-300":"text-gray-600"),children:t.category}),d.jsx("td",{className:"py-4 px-4 "+(e?"text-gray-300":"text-gray-600"),children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(h,{className:"h-4 w-4"}),d.jsx("span",{className:"font-semibold",children:t.price})]})}),d.jsx("td",{className:"py-4 px-4",children:d.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+("active"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.status})}),d.jsx("td",{className:"py-4 px-4",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(x.button,{onClick:()=>(e=>{A(e),D(!0)})(t),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:d.jsx(p,{className:"h-4 w-4"})}),d.jsx(x.button,{onClick:()=>L(t.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:d.jsx(u,{className:"h-4 w-4"})})]})})]},t.id))})]})}),H>1&&d.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[d.jsx("button",{onClick:()=>E(Math.max(1,M-1)),disabled:1===M,className:"px-3 py-2 rounded-lg "+(1===M?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Previous"}),d.jsxs("span",{className:"px-4 py-2 "+(e?"text-gray-300":"text-gray-600"),children:["Page ",M," of ",H]}),d.jsx("button",{onClick:()=>E(Math.min(H,M+1)),disabled:M===H,className:"px-3 py-2 rounded-lg "+(M===H?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Next"})]})]}),d.jsx(y,{children:$&&d.jsx(T,{tool:I,categories:U,onSave:e=>c(void 0,null,function*(){try{if(I)yield S.updateItem(I.id,e,"tools"),a(t.map(t=>t.id===I.id?o(n(n({},t),e),{updatedAt:(new Date).toISOString().split("T")[0]}):t));else{const s=yield S.createItem(e,"tools");a([s,...t])}D(!1),A(null)}catch(s){alert("Failed to save tool. Please try again.")}}),onCancel:()=>D(!1),isDarkMode:e})}),d.jsx(y,{children:F&&d.jsx(x.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:d.jsxs(x.div,{className:"max-w-md w-full rounded-xl p-6 "+(e?"bg-gray-800":"bg-white"),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[d.jsx(b,{className:"h-6 w-6 text-red-500"}),d.jsx("h3",{className:"text-lg font-semibold "+(e?"text-white":"text-gray-800"),children:"Confirm Delete"})]}),d.jsx("p",{className:"mb-6 "+(e?"text-gray-300":"text-gray-600"),children:"Are you sure you want to delete this tool? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 rounded-lg font-medium "+(e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Cancel"}),d.jsx("button",{onClick:()=>{return e=F,c(void 0,null,function*(){try{yield S.deleteItem(e,"tools"),a(t.filter(t=>t.id!==e)),L(null)}catch(s){alert("Failed to delete tool. Please try again.")}});var e},className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600",children:"Delete"})]})]})})})]})},T=({tool:e,categories:t,onSave:a,onCancel:s,isDarkMode:r})=>{const[l,i]=f.useState(e||{name:"",description:"",brand:"",model:"",price:0,category:t[0]||"",specifications:"",imageUrl:"",status:"active",rating:5,inStock:!0}),[c,m]=f.useState({}),g="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 "+(r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),h="block font-semibold mb-2 "+(r?"text-gray-300":"text-gray-700");return d.jsx(x.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:d.jsxs(x.div,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-xl p-6 "+(r?"bg-gray-800":"bg-white"),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold "+(r?"text-white":"text-gray-800"),children:e?"Edit Tool":"Add New Tool"}),d.jsx("button",{onClick:s,className:"p-2 rounded-lg "+(r?"hover:bg-gray-700":"hover:bg-gray-100"),children:d.jsx(j,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:e=>{e.preventDefault(),(()=>{var e,t,a,s;const r={};return(null==(e=l.name)?void 0:e.trim())||(r.name="Name is required"),(null==(t=l.description)?void 0:t.trim())||(r.description="Description is required"),(null==(a=l.brand)?void 0:a.trim())||(r.brand="Brand is required"),(null==(s=l.model)?void 0:s.trim())||(r.model="Model is required"),l.price&&l.price>0||(r.price="Valid price is required"),l.category||(r.category="Category is required"),m(r),0===Object.keys(r).length})()&&a(l)},className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Tool Name *"}),d.jsx("input",{type:"text",value:l.name||"",onChange:e=>i(o(n({},l),{name:e.target.value})),className:`${g} ${c.name?"border-red-500":""}`,placeholder:"Enter tool name"}),c.name&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Brand *"}),d.jsx("input",{type:"text",value:l.brand||"",onChange:e=>i(o(n({},l),{brand:e.target.value})),className:`${g} ${c.brand?"border-red-500":""}`,placeholder:"Enter brand name"}),c.brand&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.brand})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Model *"}),d.jsx("input",{type:"text",value:l.model||"",onChange:e=>i(o(n({},l),{model:e.target.value})),className:`${g} ${c.model?"border-red-500":""}`,placeholder:"Enter model number"}),c.model&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.model})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Price ($) *"}),d.jsx("input",{type:"number",min:"0",step:"0.01",value:l.price||"",onChange:e=>i(o(n({},l),{price:parseFloat(e.target.value)||0})),className:`${g} ${c.price?"border-red-500":""}`,placeholder:"0.00"}),c.price&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.price})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Category *"}),d.jsx("select",{value:l.category||"",onChange:e=>i(o(n({},l),{category:e.target.value})),className:`${g} ${c.category?"border-red-500":""}`,children:t.map(e=>d.jsx("option",{value:e,children:e},e))}),c.category&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.category})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Status"}),d.jsxs("select",{value:l.status||"active",onChange:e=>i(o(n({},l),{status:e.target.value})),className:g,children:[d.jsx("option",{value:"active",children:"Active"}),d.jsx("option",{value:"inactive",children:"Inactive"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Rating (1-5)"}),d.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:l.rating||5,onChange:e=>i(o(n({},l),{rating:parseFloat(e.target.value)||5})),className:g})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",id:"inStock",checked:l.inStock||!1,onChange:e=>i(o(n({},l),{inStock:e.target.checked})),className:"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),d.jsx("label",{htmlFor:"inStock",className:h.replace("block","inline"),children:"In Stock"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Description *"}),d.jsx("textarea",{value:l.description||"",onChange:e=>i(o(n({},l),{description:e.target.value})),className:`${g} h-32 resize-none ${c.description?"border-red-500":""}`,placeholder:"Enter tool description"}),c.description&&d.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.description})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Specifications"}),d.jsx("textarea",{value:l.specifications||"",onChange:e=>i(o(n({},l),{specifications:e.target.value})),className:g+" h-24 resize-none",placeholder:"Enter technical specifications"})]}),d.jsxs("div",{children:[d.jsx("label",{className:h,children:"Featured Image"}),d.jsx(C,{value:l.imageUrl||"",onChange:e=>i(o(n({},l),{imageUrl:e})),onError:e=>alert(e),className:"mt-1",placeholder:"Upload featured image"})]}),d.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[d.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 rounded-lg font-semibold transition-colors "+(r?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Cancel"}),d.jsxs(x.button,{type:"submit",className:"flex items-center space-x-2 px-6 py-3 bg-emerald-500 text-white rounded-lg font-semibold hover:bg-emerald-600 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(v,{className:"h-5 w-5"}),d.jsx("span",{children:e?"Update Tool":"Create Tool"})]})]})]})]})})};export{k as default};
