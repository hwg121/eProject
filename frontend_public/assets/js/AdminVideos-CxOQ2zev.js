var e=(e,t,a)=>new Promise((s,r)=>{var l=e=>{try{d(a.next(e))}catch(t){r(t)}},i=e=>{try{d(a.throw(e))}catch(t){r(t)}},d=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,i);d((a=a.apply(e,t)).next())});import{j as t,a3 as a,m as s,am as r,an as l,N as i,ao as d,ap as n,g as c}from"./ui-CMKgIyku.js";import{r as o}from"./react-vendor-Dr4n66tC.js";import{u as x,C as g}from"./index-C5dkyjdR.js";import{p as m}from"./api-BXW0tsBT.js";import"./router-bS1xvxPY.js";const h=()=>{const{isDarkMode:h}=x(),[u,y]=o.useState([]),[b,p]=o.useState(!0),[j,f]=o.useState(null),[N,v]=o.useState(""),[w,C]=o.useState("all"),[S,k]=o.useState("all"),[M,L]=o.useState(!1),[V,A]=o.useState(null),[D,H]=o.useState(1),[P,T]=o.useState(null);o.useEffect(()=>{e(void 0,null,function*(){try{p(!0),f(null);const e=yield m.getVideos();y(e)}catch(e){f("Failed to load videos")}finally{p(!1)}})},[]);const U=u.filter(e=>{const t=e.title.toLowerCase().includes(N.toLowerCase())||e.description.toLowerCase().includes(N.toLowerCase()),a="all"===w||e.category===w,s="all"===S||e.status===S;return t&&a&&s}),$=U.slice(20*(D-1),20*D),E=Math.ceil(U.length/20),F=e=>`${Math.floor(e/60)}:${(""+e%60).padStart(2,"0")}`;return b?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs(g,{className:"text-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-emerald-500 mx-auto mb-4"}),t.jsx("p",{className:"text-xl text-emerald-600",children:"Loading videos..."})]})}):j?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs(g,{className:"text-center p-8 bg-red-50 border border-red-200 text-red-700",children:[t.jsx(a,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Error Loading Videos"}),t.jsx("p",{className:"text-lg",children:j}),t.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Retry"})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold "+(h?"text-white":"text-gray-800"),children:"Videos Management"}),t.jsx("p",{className:"mt-2 "+(h?"text-gray-300":"text-gray-600"),children:"Manage gardening videos, tutorials, and guides"})]}),t.jsxs(s.button,{onClick:()=>{A(null),L(!0)},className:"flex items-center space-x-2 bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx(r,{className:"h-5 w-5"}),t.jsx("span",{children:"Add Video"})]})]}),t.jsx(g,{className:"p-6 "+(h?"bg-gray-800":"bg-white"),children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:N,onChange:e=>v(e.target.value),placeholder:"Search videos...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Category"}),t.jsx("select",{value:w,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:["all","tutorials","reviews","tips","techniques","unboxing","gardening"].map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Status"}),t.jsx("select",{value:S,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:["all","published","draft"].map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})}),t.jsxs(g,{className:h?"bg-gray-800":"bg-white",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b "+(h?"border-gray-700":"border-gray-200"),children:[t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Video"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Category"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Duration"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Status"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Views"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Actions"})]})}),t.jsx("tbody",{children:$.map(e=>t.jsxs(s.tr,{className:"border-b "+(h?"border-gray-700 hover:bg-gray-700/50":"border-gray-200 hover:bg-gray-50"),whileHover:{backgroundColor:h?"rgba(55, 65, 81, 0.5)":"rgba(249, 250, 251, 1)"},children:[t.jsx("td",{className:"py-4 px-6",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"w-16 h-12 rounded-lg overflow-hidden flex-shrink-0 relative "+(h?"bg-gray-700":"bg-gray-100"),children:[e.thumbnailUrl?t.jsx("img",{src:e.thumbnailUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(i,{className:"h-6 w-6 text-gray-400"})}),t.jsx("div",{className:"absolute bottom-1 right-1 bg-black bg-opacity-75 text-white text-xs px-1 rounded",children:F(e.duration)})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold "+(h?"text-white":"text-gray-900"),children:e.title}),t.jsx("p",{className:`text-sm ${h?"text-gray-400":"text-gray-500"} line-clamp-2`,children:e.description})]})]})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(h?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"),children:e.category})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:F(e.duration)})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:e.views.toLocaleString()})}),t.jsx("td",{className:"py-4 px-6",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(s.button,{onClick:()=>(e=>{A(e),L(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx(d,{className:"h-4 w-4"})}),t.jsx(s.button,{onClick:()=>T(e.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx(n,{className:"h-4 w-4"})})]})})]},e.id))})]})}),E>1&&t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[t.jsxs("div",{className:"text-sm "+(h?"text-gray-400":"text-gray-500"),children:["Showing ",20*(D-1)+1," to ",Math.min(20*D,U.length)," of ",U.length," videos"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>H(e=>Math.max(e-1,1)),disabled:1===D,className:"px-3 py-1 rounded-lg text-sm font-medium "+(1===D?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Previous"}),t.jsx("button",{onClick:()=>H(e=>Math.min(e+1,E)),disabled:D===E,className:"px-3 py-1 rounded-lg text-sm font-medium "+(D===E?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Next"})]})]})]}),t.jsx(c,{children:P&&t.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs(s.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"p-6 rounded-lg "+(h?"bg-gray-800":"bg-white"),children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 "+(h?"text-white":"text-gray-900"),children:"Confirm Delete"}),t.jsx("p",{className:"mb-6 "+(h?"text-gray-300":"text-gray-600"),children:"Are you sure you want to delete this video? This action cannot be undone."}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600",children:"Cancel"}),t.jsx("button",{onClick:()=>{return t=P,e(void 0,null,function*(){try{yield m.deleteItem(t,"videos"),y(u.filter(e=>e.id!==t)),T(null)}catch(e){alert("Failed to delete video. Please try again.")}});var t},className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600",children:"Delete"})]})]})})})]})};export{h as default};
