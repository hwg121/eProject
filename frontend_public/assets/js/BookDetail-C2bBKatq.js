import{j as e,m as s,O as t,q as a}from"./ui-rChtIiB6.js";import{r as i}from"./react-vendor-Dr4n66tC.js";import{D as l}from"./DetailPage-BggrP5le.js";import{L as n}from"./index-Bjlkjo5_.js";import{p as r}from"./api-ClnZCBU8.js";import{f as o}from"./slug-BijzlL0q.js";import{c as d,a as c}from"./router-bS1xvxPY.js";const m=()=>{const{slug:m}=d(),u=c(),[x,h]=i.useState(null),[p,g]=i.useState(!0),[b,j]=i.useState(null);return i.useEffect(()=>{var e;m&&(e=function*(){var e;try{g(!0);try{const s=yield r.getBooks(),t=o(s,m,"slug","title");if(t){const s={id:(null==(e=t.id)?void 0:e.toString())||m,title:t.title||"Untitled Book",description:t.description||"No description available.",content:t.content||t.summary||"\n                <h2>Book Summary</h2>\n                <p>This book provides comprehensive information about gardening techniques and practices.</p>\n              ",author:t.author||"Unknown Author",publishedAt:t.published_year?t.published_year+"-01-01":t.created_at||(new Date).toISOString(),tags:t.tags||t.categories||["General"],imageUrl:t.image||t.imageUrl||"https://images.pexels.com/photos/415071/pexels-photo-415071.jpeg",views:t.views||0,likes:t.likes||0,price:t.price||0,rating:t.rating||0,pages:t.pages||0,publishedYear:t.published_year||(new Date).getFullYear(),isbn:t.isbn||"N/A",publisher:t.publisher||"Unknown Publisher",language:t.language||"English"};return void h(s)}}catch(s){return void j("Failed to load data from server")}j("Data not found")}catch(t){j("Failed to load book")}finally{g(!1)}},new Promise((s,t)=>{var a=s=>{try{l(e.next(s))}catch(a){t(a)}},i=s=>{try{l(e.throw(s))}catch(a){t(a)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,i);l((e=e.apply(void 0,null)).next())}))},[m]),p?e.jsx(n,{}):b||!x?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-emerald-800 mb-4",children:"Book not found"}),e.jsx("button",{onClick:()=>u("/books"),className:"px-6 py-3 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Back to Books"})]})}):e.jsx(l,{type:"book",title:x.title,description:x.description,content:x.content,author:x.author,publishedAt:x.publishedAt,tags:x.tags,imageUrl:x.imageUrl,views:x.views||0,likes:x.likes||0,backUrl:"/books",rating:x.rating||0,contentId:parseInt(x.id),price:x.price,category:"Gardening",relatedContent:[{id:"2",title:"The Vegetable Gardener's Bible",type:"book",slug:"vegetable-gardeners-bible"},{id:"3",title:"Indoor Plant Care Guide",type:"book",slug:"indoor-plant-care-guide"},{id:"4",title:"Seasonal Gardening Calendar",type:"book",slug:"seasonal-gardening-calendar"}],children:e.jsxs(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center",children:[e.jsx(t,{className:"h-5 w-5 mr-2"}),"Book Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Pages:"}),e.jsx("span",{className:"text-blue-600",children:x.pages})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Published:"}),e.jsx("span",{className:"text-blue-600",children:x.publishedYear})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Publisher:"}),e.jsx("span",{className:"text-blue-600",children:x.publisher})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Language:"}),e.jsx("span",{className:"text-blue-600",children:x.language})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"ISBN:"}),e.jsx("span",{className:"text-blue-600 text-sm",children:x.isbn})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-800 mb-4",children:"Pricing & Rating"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-3xl font-bold text-emerald-800",children:["$",x.price]}),e.jsxs("div",{className:"flex items-center",children:[[...[,,,,,]].map((s,t)=>e.jsx(a,{className:"h-5 w-5 "+(t<Math.floor(x.rating)?"text-yellow-400 fill-current":"text-gray-300")},t)),e.jsxs("span",{className:"ml-2 text-emerald-700 font-medium",children:[x.rating,"/5"]})]})]}),e.jsxs("div",{className:"text-sm text-emerald-600",children:["Author: ",e.jsx("span",{className:"font-semibold",children:x.author})]})]})]})]})})};export{m as default};
