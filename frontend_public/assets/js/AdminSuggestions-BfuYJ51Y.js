var e=(e,t,s)=>new Promise((a,l)=>{var r=e=>{try{n(s.next(e))}catch(t){l(t)}},i=e=>{try{n(s.throw(e))}catch(t){l(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,i);n((s=s.apply(e,t)).next())});import{j as t,a3 as s,m as a,aj as l,ak as r,s as i,al as n,am as c,g as d}from"./ui-rChtIiB6.js";import{r as o}from"./react-vendor-Dr4n66tC.js";import{u as x,C as g}from"./index-Bjlkjo5_.js";import{p as m}from"./api-ClnZCBU8.js";import"./router-bS1xvxPY.js";const h=()=>{const{isDarkMode:h}=x(),[u,y]=o.useState([]),[p,b]=o.useState(!0),[f,j]=o.useState(null),[N,v]=o.useState(""),[w,C]=o.useState("all"),[S,k]=o.useState("all"),[M,A]=o.useState("all"),[L,T]=o.useState(!1),[D,U]=o.useState(null),[H,P]=o.useState(1),[z,E]=o.useState(null);o.useEffect(()=>{e(void 0,null,function*(){try{b(!0),j(null);const e=yield m.getSuggestions();y(e)}catch(e){j("Failed to load suggestions")}finally{b(!1)}})},[]);const F=u.filter(e=>{const t=e.title.toLowerCase().includes(N.toLowerCase())||e.description.toLowerCase().includes(N.toLowerCase()),s="all"===w||e.category===w,a="all"===S||e.difficulty===S,l="all"===M||e.status===M;return t&&s&&a&&l}),I=F.slice(20*(H-1),20*H),R=Math.ceil(F.length/20);return p?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs(g,{className:"text-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-emerald-500 mx-auto mb-4"}),t.jsx("p",{className:"text-xl text-emerald-600",children:"Loading suggestions..."})]})}):f?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs(g,{className:"text-center p-8 bg-red-50 border border-red-200 text-red-700",children:[t.jsx(s,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Error Loading Suggestions"}),t.jsx("p",{className:"text-lg",children:f}),t.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Retry"})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold "+(h?"text-white":"text-gray-800"),children:"Suggestions Management"}),t.jsx("p",{className:"mt-2 "+(h?"text-gray-300":"text-gray-600"),children:"Manage gardening tips, suggestions, and how-to guides"})]}),t.jsxs(a.button,{onClick:()=>{U(null),T(!0)},className:"flex items-center space-x-2 bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx(l,{className:"h-5 w-5"}),t.jsx("span",{children:"Add Suggestion"})]})]}),t.jsx(g,{className:"p-6 "+(h?"bg-gray-800":"bg-white"),children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",value:N,onChange:e=>v(e.target.value),placeholder:"Search suggestions...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Category"}),t.jsx("select",{value:w,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:["all","planting","watering","pruning","fertilizing","pest-control","harvesting","seasonal"].map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Difficulty"}),t.jsx("select",{value:S,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:["all","beginner","intermediate","advanced"].map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(h?"text-gray-300":"text-gray-700"),children:"Status"}),t.jsx("select",{value:M,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent "+(h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:["all","published","draft"].map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})}),t.jsxs(g,{className:h?"bg-gray-800":"bg-white",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b "+(h?"border-gray-700":"border-gray-200"),children:[t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Suggestion"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Category"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Difficulty"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Time"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Status"}),t.jsx("th",{className:"text-left py-4 px-6 font-semibold "+(h?"text-gray-300":"text-gray-700"),children:"Actions"})]})}),t.jsx("tbody",{children:I.map(e=>t.jsxs(a.tr,{className:"border-b "+(h?"border-gray-700 hover:bg-gray-700/50":"border-gray-200 hover:bg-gray-50"),whileHover:{backgroundColor:h?"rgba(55, 65, 81, 0.5)":"rgba(249, 250, 251, 1)"},children:[t.jsx("td",{className:"py-4 px-6",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0 "+(h?"bg-gray-700":"bg-gray-100"),children:e.imageUrl?t.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(i,{className:"h-6 w-6 text-gray-400"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold "+(h?"text-white":"text-gray-900"),children:e.title}),t.jsx("p",{className:`text-sm ${h?"text-gray-400":"text-gray-500"} line-clamp-2`,children:e.description}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsxs("span",{className:"text-xs "+(h?"text-gray-500":"text-gray-400"),children:[e.views," views"]}),t.jsxs("span",{className:"text-xs "+(h?"text-gray-500":"text-gray-400"),children:[e.likes," likes"]})]})]})]})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(h?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"),children:e.category})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("beginner"===e.difficulty?"bg-green-100 text-green-800":"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.difficulty})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:h?"text-gray-300":"text-gray-700",children:e.estimatedTime})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),t.jsx("td",{className:"py-4 px-6",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(a.button,{onClick:()=>(e=>{U(e),T(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx(n,{className:"h-4 w-4"})}),t.jsx(a.button,{onClick:()=>E(e.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx(c,{className:"h-4 w-4"})})]})})]},e.id))})]})}),R>1&&t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[t.jsxs("div",{className:"text-sm "+(h?"text-gray-400":"text-gray-500"),children:["Showing ",20*(H-1)+1," to ",Math.min(20*H,F.length)," of ",F.length," suggestions"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>P(e=>Math.max(e-1,1)),disabled:1===H,className:"px-3 py-1 rounded-lg text-sm font-medium "+(1===H?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Previous"}),t.jsx("button",{onClick:()=>P(e=>Math.min(e+1,R)),disabled:H===R,className:"px-3 py-1 rounded-lg text-sm font-medium "+(H===R?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-emerald-500 text-white hover:bg-emerald-600"),children:"Next"})]})]})]}),t.jsx(d,{children:z&&t.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs(a.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"p-6 rounded-lg "+(h?"bg-gray-800":"bg-white"),children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 "+(h?"text-white":"text-gray-900"),children:"Confirm Delete"}),t.jsx("p",{className:"mb-6 "+(h?"text-gray-300":"text-gray-600"),children:"Are you sure you want to delete this suggestion? This action cannot be undone."}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600",children:"Cancel"}),t.jsx("button",{onClick:()=>{return t=z,e(void 0,null,function*(){try{yield m.deleteItem(t,"suggestions"),y(u.filter(e=>e.id!==t)),E(null)}catch(e){alert("Failed to delete suggestion. Please try again.")}});var t},className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600",children:"Delete"})]})]})})})]})};export{h as default};
